(function(){console.log("LSAT Demon Analyzer injected script loaded");function i(){const e=["questions","questionData","testData","analyticsData","performanceData","results"],r=[];return e.forEach(t=>{try{window[t]&&Array.isArray(window[t])&&(console.log(`Found potential data source: ${t}`,window[t]),r.push({source:t,data:window[t]}))}catch{}}),r}function d(){const e=window.XMLHttpRequest,r=window.fetch;window.XMLHttpRequest=function(){const t=new e,n=t.open,o=t.send;return t.open=function(a,s,...l){return this._url=s,n.apply(this,[a,s,...l])},t.send=function(...a){return this.addEventListener("load",function(){if(this._url&&this._url.includes("question")||this._url.includes("analytics"))try{const s=JSON.parse(this.responseText);console.log("Intercepted AJAX response:",this._url,s),window.postMessage({type:"AJAX_DATA_INTERCEPTED",url:this._url,data:s},"*")}catch{}}),o.apply(this,a)},t},window.fetch=function(t,n={}){return r(t,n).then(o=>((t.includes("question")||t.includes("analytics"))&&o.clone().json().then(a=>{console.log("Intercepted fetch response:",t,a),window.postMessage({type:"FETCH_DATA_INTERCEPTED",url:t,data:a},"*")}).catch(()=>{}),o))}}function u(){const e=[];return document.querySelectorAll("[data-reactroot], [data-react-class]").forEach(n=>{try{const o=n._reactInternalInstance||n.__reactInternalInstance;o&&o.memoizedProps&&e.push({type:"react",data:o.memoizedProps})}catch{}}),document.querySelectorAll("[data-v-]").forEach(n=>{try{n.__vue__&&e.push({type:"vue",data:n.__vue__.$data})}catch{}}),e}function c(){const e={pageData:i(),componentData:u(),timestamp:new Date().toISOString(),url:window.location.href};return window.postMessage({type:"PAGE_DATA_EXTRACTED",data:e},"*"),e}d(),window.addEventListener("message",e=>{e.source===window&&e.data.type==="EXTRACT_PAGE_DATA"&&c()}),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c()})();
